!function(){"use strict";function e(e){return e.split(/[/?#]/)}function t(e,t){var n=t.replace(/\?/g,"\\?").replace(/\*/g,"([^/?#]+?)").replace(/\.\./,".*"),i=new RegExp("^"+n+"$"),r=e.match(i);if(r)return r.slice(1)}function n(e,t){var n;return function(){clearTimeout(n),n=setTimeout(e,t)}}function i(e){h=n(f,1),T[A](C,h),T[A](z,h),k[A](j,s),e&&f(!0)}function r(){this.$=[],y(this),I.on("stop",this.s.bind(this)),I.on("emit",this.e.bind(this))}function o(e){return e.replace(/^\/|\/$/,"")}function a(e){return"string"==typeof e}function c(e){return(e||N.href).replace(b,"")}function u(e){return"#"===g[0]?(e||N.href||"").split(g)[1]||"":(N?c(e):e||"").replace(g,"")}function f(e){var t=0===H;if(!(S<=H)&&(H++,R.push(function(){var t=u();(e||t!==m)&&(I[E]("emit",t),m=t)}),t)){for(var n;n=R.shift();)n();H=0}}function s(e){if(!(1!==e.which||e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented)){for(var t=e.target;t&&"A"!==t.nodeName;)t=t.parentNode;!t||"A"!==t.nodeName||t[x]("download")||!t[x]("href")||t.target&&"_self"!==t.target||-1===t.href.indexOf(N.href.match(b)[0])||t.href!==N.href&&(t.href.split("#")[0]===N.href.split("#")[0]||"#"!==g[0]&&0!==c(t.href).indexOf(g)||"#"===g[0]&&t.href.split(g)[0]!==N.href.split(g)[0]||!l(u(t.href),t.title||k.title))||e.preventDefault()}}function l(e,t,n){return L?(e=g+o(e),t=t||k.title,n?L.replaceState(null,t,e):L.pushState(null,t,e),k.title=t,P=!1,f(),P):I[E]("emit",u(e))}function p(){d3.select(".backgroundContainer svg").attr("width",window.innerWidth).attr("height",window.innerHeight).select("g").attr("transform","translate("+window.innerWidth/2+","+(window.innerHeight-150)+")")}function d(e){J.init(),$("body").on("click",J.rotate.toggle),_(e).filter(function(e){return 0!==e.z}).orderBy("z").forEach(function(t,n,i){console.log(t),window.setTimeout(function(){var r=$("<img style='z-index: "+(e.length-t.z)+"; width: "+t.w/2+"px; height: auto; left:"+t.x/2+"px; bottom:"+t.y/2+"px;' class='animated flipInX' src='img/people/"+t.id+".png' alt=''>").appendTo(".peopleContainer");n+1===i.length&&r.on("animationend",function(){$(".peopleContainer img").removeClass("flipInX")})},100*n)}),$(".peopleContainer").on("animationend","img",function(e){$(e.target).removeClass(M)}),$(".peopleContainer").on("mouseover","img",function(e){$(e.target).addClass(M)}),X("/",function(){}),X("/*",function(t){void 0===_(e).find({code:t})&&X("/")}),X.start(!0)}var h,g,m,v,w,y=function(e){e=e||{};var t={},n=Array.prototype.slice;return Object.defineProperties(e,{on:{value:function(n,i){return"function"==typeof i&&(t[n]=t[n]||[]).push(i),e},enumerable:!1,writable:!1,configurable:!1},off:{value:function(n,i){if("*"!=n||i)if(i)for(var r,o=t[n],a=0;r=o&&o[a];++a)r==i&&o.splice(a--,1);else delete t[n];else t={};return e},enumerable:!1,writable:!1,configurable:!1},one:{value:function(t,n){function i(){e.off(t,i),n.apply(e,arguments)}return e.on(t,i)},enumerable:!1,writable:!1,configurable:!1},trigger:{value:function(i){var r,o,a,c=arguments,u=arguments.length-1,f=new Array(u);for(a=0;a<u;a++)f[a]=c[a+1];for(r=n.call(t[i]||[],0),a=0;o=r[a];++a)o.apply(e,f);return t["*"]&&"*"!=i&&e.trigger.apply(e,["*",i].concat(f)),e},enumerable:!1,writable:!1,configurable:!1}}),e},b=/^.+?\/\/+[^/]+/,A="addEventListener",x="hasAttribute",C="popstate",z="hashchange",E="trigger",S=3,T="undefined"!=typeof window&&window,k="undefined"!=typeof document&&document,L=T&&history,N=T&&(L.location||T.location),O=r.prototype,j=k&&k.ontouchstart?"touchstart":"click",I=y(),K=!1,P=!1,R=[],H=0;O.m=function(e,t,n){!a(e)||t&&!a(t)?t?this.r(e,t):this.r("@",e):l(e,t,n||!1)},O.s=function(){this.off("*"),this.$=[]},O.e=function(e){this.$.concat("@").some(function(t){var n=("@"===t?v:w)(o(e),o(t));if(void 0!==n)return this[E].apply(null,[t].concat(n)),P=!0},this)},O.r=function(e,t){"@"!==e&&(e="/"+o(e),this.$.push(e)),this.on(e,t)};var W=new r,X=W.m.bind(W);X.create=function(){var e=new r,t=e.m.bind(e);return t.stop=e.s.bind(e),t},X.base=function(e){g=e||"#",m=u()},X.exec=function(){f(!0)},X.parser=function(n,i){n||i||(v=e,w=t),n&&(v=n),i&&(w=i)},X.query=function(){var e={};return(N.href||m).replace(/[?&](.+?)=([^&]*)/g,function(t,n,i){e[n]=i}),e},X.stop=function(){K&&(T&&(T.removeEventListener(C,h),T.removeEventListener(z,h),k.removeEventListener(j,s)),I[E]("stop"),K=!1)},X.start=function(e){K||(T&&("interactive"===document.readyState||"complete"===document.readyState?i(e):document.onreadystatechange=function(){"interactive"===document.readyState&&setTimeout(function(){i(e)},1)}),K=!0)},X.base(),X.parser();var q,B,D=d3.arc().innerRadius(50).outerRadius(2e3),J={init:function(e){e=e||40,(q=d3.selectAll(".backgroundContainer").append("svg").append("g").append("g").classed("rotate stop",!0)).selectAll("path").data(new Array(e)).enter().append("path").attr("d",function(t,n,i){var r=2*Math.PI/e;return D({startAngle:n*r,endAngle:n*r+r/2})}),p(),B.start()},resize:p,rotate:B={start:function(){q.classed("stop",!1)},stop:function(){q.classed("stop",!0)},toggle:function(){q.classed("stop",!q.classed("stop"))}}},M="jello";$(function(){$.getJSON("data/data.json").then(d)}),$(window).on("resize",function(){J.resize()})}();
